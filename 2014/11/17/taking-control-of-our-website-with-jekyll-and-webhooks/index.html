<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Basic Page Needs
================================================== -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="vmVo2wbQpKGMHVpllQP7bQ0w5gICWD356VH9DNbv5f4" />


<!-- Mobile Specific Metas
================================================== -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<!-- RSS feeds
================================================== -->

<link rel="alternate" type="application/rss+xml" title="18F Digital Services Delivery &raquo; Feed" href="/feed/" />

<!-- Twitter and OpenGraph data
================================================== -->
<meta name="twitter:site" content="@18F">
<meta name="twitter:creator" content="@18F">
<meta property="og:site_name" content="18F Digital Services Delivery" />
<meta property="og:type" content="website" />

<meta property="og:url" content="https://18f.gsa.gov/2014/11/17/taking-control-of-our-website-with-jekyll-and-webhooks/" />
<link rel="canonical" href="https://18f.gsa.gov/2014/11/17/taking-control-of-our-website-with-jekyll-and-webhooks/" />

<!-- title, description, and image may change per-page, per-post -->

  <title>18F &mdash; Taking control of our website with Jekyll and webhooks</title>
  <meta property="og:title" content="Taking control of our website with Jekyll and webhooks" />


  <meta name="description" content="How we moved our website to Jekyll, left Tumblr behind, and set up automatic deployment with webhooks.">
  <meta property="og:description" content="How we moved our website to Jekyll, left Tumblr behind, and set up automatic deployment with webhooks." />


<!-- use large summary card for posts with images, normal summary otherwise -->

  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:image" content="https://18f.gsa.gov/assets/blog/new-jekyll-site/header.png" />



<!-- Favicons
================================================== -->
<!-- 128x128 -->
<link rel="shortcut icon" type="image/ico" href="/assets/images/favicons/favicon.ico" />
<link rel="icon" type="image/png" href="/assets/images/favicons/favicon.png" />

<!-- 192x192, as recommended for Android
http://updates.html5rocks.com/2014/11/Support-for-theme-color-in-Chrome-39-for-Android
-->
<link rel="icon" type="image/png" sizes="192x192" href="/assets/images/favicons/18f-center-192.png" />

<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/assets/images/favicons/18f-center-57.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/images/favicons/18f-center-72.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/images/favicons/18f-center-114.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/images/favicons/18f-center-144.png">

<!-- Mobile "theme" -->
<meta name="theme-color" content="#1188ff" />

<!-- CSS
================================================== -->
<link href="/assets/css/google-fonts.css" rel="stylesheet">
<link href="/assets/css/font-awesome.min.css" rel="stylesheet">
<link href="/assets/css/fonts.css" rel="stylesheet">
<link href="/assets/css/normalize.css" rel="stylesheet">
<link href="/assets/css/styles.css" rel="stylesheet">
<link href="/assets/css/pygments-theme.css" rel="stylesheet">

<!-- IE
================================================== -->
<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <link href="/assets/css/ie8/ie.css" rel="stylesheet">
<![endif]-->

<!--
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssso        osssssssssso/-.```.-/osssssssssss:            -ossssss
sssssssssssssssssssssssssssssssssssss++++++-  osssssssso-  `-///-`  -osssssssss-  -+++++++++-ossssss
sssssssssssssssssssssssssssssssssssssssssss-  ossssssso. `/ossssso/` .ossssssss-  osssssssssssssssss
sssssssssssssssssssssssssssssssssssssssssss-  osssssss/  /sssssssss/  /ssssssss-  osssssssssssssssss
sssssssssssssssssssssssssssssssssssssssssss-  osssssss/  /sssssssss/  /ssssssss-  osssssssssssssssss
sssssssssssssssssssssssssssssssssssssssssss-  ossssssso. `/sssssss/` `ossssssss-  osssssssssssssssss
sssssssssssssssssssssssssssssssssssssssssss-  osssssssso-  .:///:.  -osssssssss-  osssssssssssssssss
sssssssssssssssssssssssssssssssssssssssssss-  ossssssss+:`   ````   -/ossssssss-  osssssssssssssssss
sssssssssssssssssssssssssssssssssssssssssss-  ossssss/.` .:++oooo+/-` `:ossssss-  osssssssssssssssss
sssssssssssssssssssssssssssssssssssssssssss-  osssso-  -+osssssssssso/` `/sssss-  osssssssssssssssss
sssssssssssssssssssssssssssssssssssssssssss-  ossso. `/ssssssssssssssso-  /ssss-  osssssssssssssssss
sssssssssssssssssssssssssssssssssssssssssss-  osss-  /ssssssssssssssssso. `osss-            -sssssss
sssssssssssssssssssssssssssssssssssssssssss-  osss  `sssssssssssssssssss/  /sss-  -+++++++++-sssssss
sssssssssssssssssssssssssssssssssssssssssss-  osss  .sssssssssssssssssss/  :sss-  osssssssssssssssss
sssssssssssssssssssssssssssssssssssssssssss-  osss.  ossssssssssssssssss-  +sss-  osssssssssssssssss
sssssssssssssssssssssssssssssssssssssssssss-  osss+` .ossssssssssssssss:  -ssss-  osssssssssssssssss
sssssssssssssssssssssssssssssssssssssssssss-  ossss+` `/ossssssssssss+-  -sssss-  osssssssssssssssss
sssssssssssssssssssssssssssssssssssssssssss-  ossssso:` `:+oooooooo/-  .+ssssss-  osssssssssssssssss
sssssssssssssssssssssssssssssssssssssssssss-  ossssssso/.` ``....`  `-+ssssssss-  osssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssso++ssssssssssso+/::-:://osssssssssss+++ssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss

Hi there! Great job on pulling back the curtain.
We're always looking for curious people with diverse skill-sets. Let's talk at 18f@gsa.gov

-->


</head>
<body itemscope itemtype="http://schema.org/WebPage">

<aside class="usa">
  <div class="container">
    <p>
      An official website of the United States Government <img alt="US flag
signifying that this is a United States Federal Government website"
src="/assets/images/us_flag_small.png">
    </p>
  </div>
</aside>


<section class="container bare">
	<a href="#main" class="skips">Skip to main content</a>
<nav class="global-nav ">
  <a href="#" class="toggle">Menu</a>
  <a href="#" class="toggle hidden">Close</a>
  <ul class="hidden global-nav-links">
    <li class="global-nav-link"><a href="/dashboard">Work</a></li>
    <li class="global-nav-link"><a href="/team">People</a></li>
    <li class="global-nav-link"><a href="/consulting">Consulting</a></li>
    <li class="global-nav-link"><a href="https://pages.18f.gov/joining-18f/">Join</a></li>
  </ul>
  <span class="sep">|</span>
  <ul class="hidden global-nav-links">
    <li class="global-nav-link"><a href="/blog">Blog</a></li>
    <li class="global-nav-link"><a href="/#newsletter">Newsletter</a></li>
    <li class="global-nav-link"><a href="/">Home</a></li>
  </ul>
</nav>

	<div class="bare-logo" role="banner" itemscope itemtype="http://schema.org/WPHeader">
    <a href="/">
      <i class="icon-18f-logo"><p style="display:none;">18F</p></i>
    </a>
  
  </div>

  <div id="main" class="bare-content" role="main" itemscope itemprop="mainContentOfPage">

    <section class="blog-posting" itemprop="blogPosts" itemscope itemtype="http://schema.org/BlogPosting">

      <h1><a href="/2014/11/17/taking-control-of-our-website-with-jekyll-and-webhooks/">Taking control of our website with Jekyll and webhooks</a></h1>

      <time datetime="2014-11-17T00:00:00+00:00" itemprop="datePublished">November 17, 2014 </time>

      <p>
        Tagged /
        <span class="blog-tags" itemprop="keywords">
          
            <a href="/tags/jekyll">jekyll</a>
            /
          
            <a href="/tags/technical">technical</a>
            /
          
            <a href="/tags/howto">howto</a>
            /
          
        </span>
      </p>
      
<p class="authors">
  by 
  <span class="author eric" style="color: #000">
    <a href=/team/eric>Eric Mill</a>, 
  
  <span class="author mhz" style="color: #000">
    <a href=/team/mhz>Michelle Hertzfeld</a>,  and 
  
  <span class="author boone" style="color: #000">
    <a href=/team/boone>Greg Boone</a>
  </span>
</p>


      <p><a href="https://github.com/18F/18f.gsa.gov/pull/235"><img src="/assets/blog/new-jekyll-site/header.png" alt="Our website running with Jekyll"></a></p>

<p>A few of us here recently took a bit of time to drastically rework 18F&#39;s main <a href="https://18f.gsa.gov">website and blog</a> &mdash; what you&#39;re reading right now &mdash; and take it fully into our own hands.</p>

<p>It may not look a lot different on the surface, but we made some serious infrastructure changes. Namely, we migrated the site to <a href="http://jekyllrb.com/">Jekyll</a>, and left Tumblr behind by moving the blog inside to join it. We also set up automatic deployment to staging and live sites, using GitHub&#39;s webhook system.</p>

<!-- more -->

<p>Deploying our blog posts from GitHub instead of managing a separate Tumblr account has drastically simplified our publishing process and opened it up to the whole team. While we still have an approval process for the <em>content</em> of our blog posts, now anyone on the team <a href="https://github.com/18F/18f.gsa.gov/pull/314">can hit the Publish button</a>.</p>

<p>To that end, we&#39;ve written a <a href="https://github.com/18F/18f.gsa.gov/blob/staging/_posts/README.md">team blogging
guide</a>
to make the blogging process easier for teammates less familiar with
Jekyll.</p>

<p>You can see <a href="https://github.com/18F/18f.gsa.gov/pull/235">all of our work in GitHub</a>, but below are more details on how we got this done for anyone interested in trying it out.</p>

<h2 id="moving-to-jekyll">Moving to Jekyll</h2>

<p>Our site&#39;s first draft was a handful of static HTML pages with lots of copied-and-pasted header and footer boilerplate. Not fun to maintain!</p>

<p>We&#39;ve now moved to <strong><a href="http://jekyllrb.com/">Jekyll 2.4</a></strong>, a basic templating system that generates static files when needed. This enables us to use templated layouts and includes for rendering HTML, and plugins to transform content during the rendering process. The resulting static files can be served extremely efficiently.</p>

<p>We also took the time to <strong><a href="https://github.com/18F/18f.gsa.gov/blob/staging/_data/team.yml">make data out of our team</a></strong> and turn them all into a YAML file. This lets us render a grid of their faces more easily, even open up a <a href="/api/data/team.json">little JSON API of our team</a>:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"jamie"</span><span class="p">,</span>
    <span class="s2">"full_name"</span><span class="p">:</span> <span class="s2">"Jamie Albrecht"</span>
  <span class="p">},</span>
  <span class="c1">// ... more teammates ...</span>
<span class="p">}</span>
</code></pre></div>
<p>Jekyll also has some powerful syntax highlighting features, as shown in the JSON snippet above. We use the <a href="https://github.com/vmg/redcarpet">Redcarpet</a> renderer, which enables the kind of syntax highlighting you get from GitHub Flavored Markdown.</p>

<p>The above snippet is rendered using:</p>
<div class="highlight"><pre><code class="language-" data-lang="">```javascript
[
  {
    "name": "jamie",
    "full_name": "Jamie Albrecht"
  },
  // ... more teammates ...
}
```
</code></pre></div>
<p>For more about the syntax highlighting integration process, see <a href="https://github.com/18F/18f.gsa.gov/pull/327">this pull request</a>.</p>

<p>Finally, we moved from Bootstrap to <a href="http://bourbon.io/">Bourbon.io</a> as our site&#39;s basic CSS framework. This allows us to have more modular Sass-based file structure to our site styles, and makes our site more easily customizable. Bourbon.io also plays nicely with Jekyll&#39;s built-in Sass rendering engine.</p>

<h2 id="blogging-with-freedom">Blogging with freedom</h2>

<p>Jekyll is a fantastic blog engine so we&#39;ve also <strong>ditched our Tumblr blog</strong>. We took the <a href="http://18fblog.tumblr.com">old blog</a> and imported it to <a href="18f.gsa.gov/news"><code>https://18f.gsa.gov/news</code></a>.</p>

<p>This lets us do all kinds of fun things, such as <strong>writing in Markdown</strong>. <a href="http://daringfireball.net/projects/markdown/syntax">Markdown</a> is a simple text-based markup language designed to be easy for humans to type. For example, a <a href="https://18f.gsa.gov/2014/09/25/design-studio-onrr/">recent post about our EITI design studio</a> is a <a href="https://raw.githubusercontent.com/18F/18f.gsa.gov/staging/_posts/2014-09-25-design-studio-onrr.md">Markdown file</a> that was written like this:</p>
<div class="highlight"><pre><code class="language-" data-lang="">**Creating user personas.** Based on the participantsâ€™ previous research on users,
the group developed [user personas](http://www.usability.gov/how-to-and-tools/methods/personas.html)
to serve as examples of the types of people who would interact with the website.
</code></pre></div>
<p>Jekyll also lets you associate any metadata you want with posts using &quot;YAML front-matter&quot;. At the top of a Markdown file, you put whatever key-value pairs you want to pair with the post. This way, you can keep information about a post together with it and still use it in multiple places (for example, in OpenGraph tags and Twitter cards).</p>

<p>This <a href="https://18f.gsa.gov/2014/10/01/open-source-hack-series-midas/">recent post on an 18F-hosted hackathon</a> is a <a href="https://raw.githubusercontent.com/18F/18f.gsa.gov/staging/_posts/2014-10-01-open-source-hack-series-midas.md">Markdown file</a> that begins with this metadata:</p>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="nn">---</span>
<span class="s">layout</span><span class="pi">:</span> <span class="s">post</span>
<span class="s">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">18F</span><span class="nv"> </span><span class="s">open</span><span class="nv"> </span><span class="s">source</span><span class="nv"> </span><span class="s">hack</span><span class="nv"> </span><span class="s">series:</span><span class="nv"> </span><span class="s">Midas"</span>
<span class="s">image</span><span class="pi">:</span> <span class="s">/assets/blog/midas-oct-hacking/coding.jpg</span>
<span class="s">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">We're</span><span class="nv"> </span><span class="s">building</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">future</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">government,</span><span class="nv"> </span><span class="s">but</span><span class="nv"> </span><span class="s">we</span><span class="nv"> </span><span class="s">need</span><span class="nv"> </span><span class="s">your</span><span class="nv"> </span><span class="s">help!</span><span class="nv"> </span><span class="s">Join</span><span class="nv"> </span><span class="s">us</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">session</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">coding</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">UX</span><span class="nv"> </span><span class="s">design.</span><span class="nv"> </span><span class="s">Feel</span><span class="nv"> </span><span class="s">free</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">come</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">afternoon</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">evening</span><span class="nv"> </span><span class="s">session</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">both!</span><span class="nv"> </span><span class="s">You</span><span class="nv"> </span><span class="s">can</span><span class="nv"> </span><span class="s">work</span><span class="nv"> </span><span class="s">solo,</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">pairs</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">groups</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">form</span><span class="nv"> </span><span class="s">when</span><span class="nv"> </span><span class="s">we</span><span class="nv"> </span><span class="s">get</span><span class="nv"> </span><span class="s">there."</span>
<span class="s">excerpt</span><span class="pi">:</span> <span class="s2">"</span><span class="s">18F</span><span class="nv"> </span><span class="s">invites</span><span class="nv"> </span><span class="s">designers</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">developers</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">inside</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">outside</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">government</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">join</span><span class="nv"> </span><span class="s">us</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">flurry</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">coding</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">sketching.</span><span class="nv">  </span><span class="s">Midas</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">open</span><span class="nv"> </span><span class="s">source</span><span class="nv"> </span><span class="s">project</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">active</span><span class="nv"> </span><span class="s">development</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">18F,</span><span class="nv"> </span><span class="s">Health</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">Human</span><span class="nv"> </span><span class="s">Services</span><span class="nv"> </span><span class="s">(HHS)</span><span class="nv"> </span><span class="s">IDEA</span><span class="nv"> </span><span class="s">Lab</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">State</span><span class="nv"> </span><span class="s">Department.</span><span class="nv">  </span><span class="s">A</span><span class="nv"> </span><span class="s">small</span><span class="nv"> </span><span class="s">cross-agency</span><span class="nv"> </span><span class="s">team,</span><span class="nv"> </span><span class="s">dedicated</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">launching</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">product</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">empower</span><span class="nv"> </span><span class="s">passionate</span><span class="nv"> </span><span class="s">civil</span><span class="nv"> </span><span class="s">servants</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">aspiring</span><span class="nv"> </span><span class="s">diplomats</span><span class="nv"> </span><span class="s">all</span><span class="nv"> </span><span class="s">over</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">world."</span>
<span class="s">authors</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">sarah</span>
<span class="s">tags</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">open source</span>
<span class="pi">-</span> <span class="s">how we work</span>
<span class="pi">-</span> <span class="s">midas</span>
<span class="nn">---</span>
</code></pre></div>
<p>Because we&#39;re running Jekyll on our own servers, we can also make our own custom plugins. (While Jekyll works on GitHub Pages, most Jekyll plugins sadly do not.) Since we have our authors <a href="https://github.com/18F/18f.gsa.gov/blob/staging/_data/authors.yml">captured as data</a>, we wrote a <a href="https://github.com/18F/18f.gsa.gov/blob/staging/_plugins/author.rb">simple plugin</a> to add a <code>lookup</code> filter to our templates using that loops through a data file. (<strong>Note</strong>: We&#39;ve since rewritten our plugin to <a href="https://github.com/18F/18f.gsa.gov/issues/633">generate bylines automatically</a>.)</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"authors"</span><span class="nt">&gt;</span>
  by {% for author in post.authors %}{{author | lookup:"authors, full_name"}}{% unless forloop.last %}, {%endunless%}{% endfor %}
<span class="nt">&lt;/p&gt;</span>
</code></pre></div>
<p>Which produces:</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"authors"</span><span class="nt">&gt;</span>
  by <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"author chrisc"</span><span class="nt">&gt;</span>Chris Cairns<span class="nt">&lt;/span&gt;</span>, <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"author mhz"</span><span class="nt">&gt;</span>Michelle Hertzfeld<span class="nt">&lt;/span&gt;</span>, and <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"author nick"</span><span class="nt">&gt;</span>Nick Bristow<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/p&gt;</span>
</code></pre></div>
<p>This way, we can update team names in one place and have it automatically update all of their posts. In the future, we can do a lot more, like link each person&#39;s name to their previous posts, or maybe even put little icons next to people&#39;s names. The future is an exciting place.</p>

<p>Finally, we can use Jekyll to generate an <a href="https://18f.gsa.gov/feed/">RSS feed</a> for our blog so that you can plug it into your feed reader, or into powerful tools like <a href="https://ifttt.com/">IFTTT</a> and <a href="http://pipes.yahoo.com/pipes/">Yahoo Pipes</a>.</p>

<p>For example, the below IFTTT recipe will email you every time 18F publishes something:</p>

<p><a href="https://ifttt.com/view_embed_recipe/214709-a-new-18f-blog-post-email-me-a-link-to-go-read-it-right-away" target = "_blank" class="embed_recipe embed_recipe-l_63" id= "embed_recipe-214709"><img src= 'https://ifttt.com/recipe_embed_img/214709' alt="IFTTT Recipe: A new 18F blog post?! Email me a link to go read it right away! connects feed to email" width="370px" style="max-width:100%"/></a><script async type="text/javascript" src= "https://ifttt.com/assets/embed_recipe.js"></script></p>

<h2 id="automatic-deployment">Automatic deployment</h2>

<p>Even though we&#39;re not using GitHub Pages, we really wanted any changes to show up on our staging and live sites immediately and automatically. Automatic deployment changes team behavior, and makes anyone feel empowered to make changes without going through a bottleneck.</p>

<p>We made this work using <strong><a href="https://github.com/blog/1778-webhooks-level-up">GitHub&#39;s webhooks</a></strong>. A free feature, GitHub will notify the URL of your choice whenever various events happen to your repository.</p>

<p>We created two webhooks for <a href="https://github.com/18f/18f.gsa.gov">our website&#39;s main repository</a>, pointed at our staging and live URLs:</p>

<p><img src="/assets/blog/new-jekyll-site/webhooks.png" alt="18F site webhooks"></p>

<p>Each is configured to notify the webhook when changes are made to the files in the repository, either directly or through a pull request.</p>

<p>We use a small tool called <a href="https://github.com/coreh/hookshot"><code>hookshot</code></a>, a tiny Node HTTP server that can listen for any updates to a given branch and run a given command. We run two of these, one for our <code>staging</code> branch, and one for our <code>production</code> branch.  Each of them is given the command to re-build the site.</p>

<p>We daemonize the webhooks using <a href="https://github.com/nodejitsu/forever"><code>forever</code></a>. Starting the webhook process for the staging site looks something like this:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">forever start -a deploy/hookshot.js -p 3000 -b staging -c <span class="s2">"cd /path/to/18f.gsa.gov &amp;&amp; git pull &amp;&amp; jekyll build"</span>
</code></pre></div>
<p>These hookshot processes run on the web server, and we make them available for GitHub to speak with through an <a href="https://github.com/18F/18f.gsa.gov/blob/b8069877ccaf1d7d0c78177dc862100b9d6e5b31/deploy/18f-site.conf#L37-L52">nginx reverse proxy</a>:</p>
<div class="highlight"><pre><code class="language-nginx" data-lang="nginx"><span class="k">location</span> <span class="n">/deploy</span> <span class="p">{</span>
    <span class="kn">proxy_pass</span> <span class="s">http://localhost:3000/</span><span class="p">;</span>
    <span class="c1"># ... more proxy options ...
</span><span class="p">}</span>
</code></pre></div>
<p>We have our nginx configuration and deploy scripts <a href="https://github.com/18F/18f.gsa.gov/blob/staging/deploy">versioned and documented</a> for anyone who wants to do something similar.</p>

<h2 id="it&#39;s-nice-to-have-control">It&#39;s nice to have control</h2>

<p>Taken together, these steps greatly simplified our site&#39;s development and deployment, and gave our blog the flexibility of self-publishing. It&#39;s nice to have control, and we hope the details of our work are helpful for anyone interested in doing the same.</p>


    </section>

    
        <section class="blog-pagination">
          <div>
            
              <a href="/2014/11/13/why-we-use-https-in-every-gov-website-we-make/">
                <h1><i class="fa fa-chevron-left"></i> Previous Post</h1>
                <p>&ldquo;Why we use HTTPS for every .gov we make&rdquo;</p>
              </a>
            
          </div>
          <div>
            
                <a href="/2014/11/26/how-to-use-more-open-source/">
                  <h1>Next Post <i class="fa fa-chevron-right"></i></h1>
                  <p>&ldquo;How to use more open source in your next federal IT aquisition&rdquo;</p>
                </a>
            
          </div>
        </section>
    

    <section class="blog-related">
      <h1>Related Posts</h1>
      <ul><li><a href='/2015/07/16/introduction-to-https-webinar/' class='related_posts'>&ldquo;An introduction to HTTPS, by 18F and DigitalGov University&rdquo;</a></li><li><a href='/2015/06/03/giving-back-to-open-source/' class='related_posts'>&ldquo;Giving back to open source: Everybody wins&rdquo;</a></li><li><a href='/2015/04/21/hackathons-not-just-for-folks-who-code/' class='related_posts'>&ldquo;Hackathons: not just for folks who code&rdquo;</a></li></ul
    </section>
    <aside class="blog-follow-us">
      <h1>Follow the latest news from 18F</h1>
      <ul>
        <li><i class="fa fa-twitter"></i> <a href="https://twitter.com/18f">@18F</a></li>
        <li><i class="fa fa-rss"></i> <a href="/feed/">18F News Feed</a></li>
      </ul>

      <!-- <i class="fa fa-github"></i> <a href="https://github.com/18f">GitHub / 18F</a> -->

    </aside>

  </div>

</section>

  <footer class="footer usa-footer usa-footer-big">
  <div class="container usa-footer-primary-section">
    <div class="usa-grid-full">
        <div class="usa-width-one-sixth footer-content">
          <img src="/assets/images/logo-gsa.png" alt="GSA logo">
          <div>
            <a href="https://github.com/18f"><img src="/assets/images/always-be-shipping_orange.png" alt="Always Be Shipping."></a>
          </div>
        </div>
          <div class="usa-width-one-sixth usa-footer-primary-content footer-content" itemscope itemtype="http://schema.org/ContactPoint">
            <h1>Work</h1>
              <a href="/delivery" title="Delivery">Delivery</a>
              </br>
              <a href="/consulting" title="Consulting">Consulting</a>
              </br>
              <a href="/dashboard" title="Dashboard">Dashboard</a>
              <br/>
              <a href="https://github.com/18F"><i class="fa fa-github" title="18F GitHub page"></i> github.com/18F</a>
          </div>
          <div class="usa-width-one-sixth usa-footer-primary-content footer-content">
            <h1>People</h1>
              <a href="/team" title="18F People">Team</a>
              </br>
              <a href="https://pages.18f.gov/joining-18f/" title="Joining 18F">Join us</a>
          </div>
          <div class="usa-width-one-sixth usa-footer-primary-content footer-content">
            <h1> Resources </h1>
              <a href="/blog" title="18F Blog">Blog</a>
              </br>
              <a href="https://pages.18f.gov/guides" title="18F Guides">Guides</a>
              </br>
              <a href="/developer/" title="Developer program">Developer program</a>
            </a>
          </div>
          <div class="usa-width-one-sixth usa-footer-primary-content footer-content">
            <h1>Policies</h1>
              <a href="/linking-policy/" title="18F Linking policy">Linking</a>
              <br/>
              <a href="https://github.com/18F/open-source-policy" title="18F Open source policy">Open source</a>
              <br/>
              <a href="https://github.com/18F/18f.gsa.gov/edit/staging/_posts/2014-11-17-taking-control-of-our-website-with-jekyll-and-webhooks.md" title="Edit this page">Edit this page</a>
          </div>
          <div class="usa-width-one-sixth usa-footer-primary-content footer-content">
             <h1>Contact Us</h1>
                <a href="/press" title="Press">Press</a>
                <br/>
                <a href="https://twitter.com/18F"><i class="fa fa-twitter" title="18F Twitter"></i> @18F</a>
                </br>
                <a href="mailto:18f@gsa.gov" itemprop="email"><i class="fa fa-envelope" title= "email 18F"></i> 18F@gsa.gov</a>
          </div>
    </div>
  </div>
</footer>

  <!-- JS
================================================== -->
<script src="/assets/js/jquery-2.1.1.min.js"></script>
<script src="/assets/js/responsiveslides.min.js"></script>


<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if IE 9 ]>
  <script src="/assets/js/ie8/html5shiv.js"></script>
  <script src="/assets/js/ie8/respond.js"></script>
-->

<!--
  IE detection, used to guide console formatting in subsequent include
-->
<script type="text/javascript">window._ie9 = false;</script>

<!--[if IE 9 ]>
  <script type="text/javascript">window._ie9 = true;</script>
<![endif]-->

<!--
 IE10 JS targeting: https://stackoverflow.com/a/17099988
 IE11 JS targeting: https://stackoverflow.com/a/17447695
-->
<script type="text/javascript">
  window._ie10 = ("onpropertychange" in document && !!window.matchMedia);
  window._ie11 = !!navigator.userAgent.match(/Trident\/7.0; rv 11/);
  window._ie = window._ie9 || window._ie10 || window._ie11;
</script>

<!-- Browser warning, console message -->
<script src="/assets/js/18f.js"></script>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-48605964-1', 'gsa.gov');

  // anonymize user IPs (chops off the last IP triplet)
  ga('set', 'anonymizeIp', true);

  // forces HTTPS even if the page were somehow loaded over http://
  ga('set', 'forceSSL', true);

  ga('send', 'pageview');
</script>

<!-- Digital Analytics Program roll-up, see https://analytics.usa.gov for data -->
<script id="_fed_an_ua_tag" src="https://dap.digitalgov.gov/Universal-Federated-Analytics-Min.js?agency=GSA"></script>


</body>
</html>
